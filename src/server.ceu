#include "mars/server/mars-server.ceu"

_printf ("[server] Starting server...\n");
par do
  var UV_TCP_Server_Data shared = val UV_TCP_Server_Data (true);
  await UV_TCP_Server (LOCALHOST, R_PORT, BACKLOG, _, &shared);
with
  var UV_TCP_Server_Data shared = val UV_TCP_Server_Data (false);
  await UV_TCP_Server (LOCALHOST, W_PORT, BACKLOG, _, &shared);
end
